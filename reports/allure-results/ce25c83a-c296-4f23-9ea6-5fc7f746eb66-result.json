{"name": "POST /users", "status": "failed", "statusDetails": {"message": "AssertionError: ❌ Ожидался статус 201, но получен 401.\nURL: https://reqres.in/api/users\nОтвет: {\"error\":\"Missing API key\"}", "trace": "@allure.title(\"POST /users\")\n    def test_create_user():\n        with allure.step(\"Создаём нового пользователя\"):\n            payload = UserRequest(name=\"Rustam\", job=\"QA Engineer\")\n            resp = client.request(\"POST\", \"/users\", json=payload.to_dict())\n>           assert_status_code(resp, 201)\n\ntests/test_api.py:27: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nresponse = <Response [401]>, expected_codes = (201,), status_code = 401\nexpected_str = '201'\n\n    def assert_status_code(response, *expected_codes):\n        \"\"\"\n        Проверяет, что статус-код ответа входит в список допустимых.\n        Добавляет тело ответа в Allure при ошибке.\n    \n        :param response: объект Response\n        :param expected_codes: один или несколько допустимых кодов (например, 200, 204)\n        \"\"\"\n        status_code = response.status_code\n        expected_str = \", \".join(map(str, expected_codes))\n    \n        if status_code not in expected_codes:\n            allure.attach(\n                response.text,\n                name=f\"Response body ({status_code})\",\n                attachment_type=allure.attachment_type.JSON\n            )\n    \n>           raise AssertionError(\n                f\"❌ Ожидался статус {expected_str}, но получен {status_code}.\\n\"\n                f\"URL: {response.url}\\n\"\n                f\"Ответ: {response.text}\"\n            )\nE           AssertionError: ❌ Ожидался статус 201, но получен 401.\nE           URL: https://reqres.in/api/users\nE           Ответ: {\"error\":\"Missing API key\"}\n\nsrc/framework/utils/assertions.py:21: AssertionError"}, "steps": [{"name": "Создаём нового пользователя", "status": "failed", "statusDetails": {"message": "AssertionError: ❌ Ожидался статус 201, но получен 401.\nURL: https://reqres.in/api/users\nОтвет: {\"error\":\"Missing API key\"}\n", "trace": "  File \"/Users/rustam/Desktop/pythonProjects/new_py_api_ui/tests/test_api.py\", line 27, in test_create_user\n    assert_status_code(resp, 201)\n  File \"/Users/rustam/Desktop/pythonProjects/new_py_api_ui/src/framework/utils/assertions.py\", line 21, in assert_status_code\n    raise AssertionError(\n"}, "steps": [{"name": "Отправляем 'POST' запрос на '/users'", "status": "passed", "attachments": [{"name": "Request", "source": "dc067e1b-eefe-422a-8ace-ad5f50647244-attachment.json", "type": "application/json"}, {"name": "Response", "source": "edf9a458-9a28-4e52-9b8a-98221b128e00-attachment.json", "type": "application/json"}], "parameters": [{"name": "method", "value": "'POST'"}, {"name": "endpoint", "value": "'/users'"}, {"name": "json", "value": "{'name': 'Rustam', 'job': 'QA Engineer'}"}], "start": 1761658274751, "stop": 1761658275118}], "attachments": [{"name": "Response body (401)", "source": "c0d46680-685b-4eaf-b4e5-08e448aae2f5-attachment.json", "type": "application/json"}], "start": 1761658274751, "stop": 1761658275118}], "start": 1761658274750, "stop": 1761658275118, "uuid": "c8eb300a-c894-47af-b45a-b0b048e0d1ef", "historyId": "6dc6ade2f649e89ff38a3162f9d7ef57", "testCaseId": "6dc6ade2f649e89ff38a3162f9d7ef57", "fullName": "tests.test_api#test_create_user", "labels": [{"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_api"}, {"name": "host", "value": "Rustams-MacBook-Pro.local"}, {"name": "thread", "value": "14744-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_api"}], "titlePath": ["tests", "test_api.py"]}